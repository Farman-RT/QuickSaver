{% extends "base.html" %}
{% block content %}
<section class="hero">
  <div class="hero-inner">
    <h2>Paste URL & Download</h2>
    <p class="muted">Supports YouTube (priority), Facebook, Instagram and more.</p>

    <div class="input-row">
      <input id="videoUrl" name="videoUrl" type="text" placeholder="Paste video URL here (https://...)" />
      <select id="format" name="format">
        <option value="mp4">MP4 (Video)</option>
        <option value="mp3">MP3 (Audio)</option>
      </select>
      <button id="downloadBtn" class="btn">Download</button>
    </div>

    <div id="status" class="status"></div>

    <!-- ðŸš¨ 5-second Interstitial Ad -->
    <div id="interstitialAd" class="hidden" aria-hidden="true">
      <p>Please wait <span id="countdown">5</span> secondsâ€¦</p>
      <div class="ad small-ad">
        {% raw %}
        <script>
          setTimeout(function() {
            (function(d, z, s){
              s = document.createElement('script');
              s.src = 'https://' + d + '/401/' + z;
              try {
                (document.body || document.documentElement).appendChild(s);
              } catch(e){}
            })('groleegni.net', 9765017);
          }, 5000);
        </script>
        {% endraw %}
      </div>
      <button id="continueBtn" class="btn" disabled>Continue to Download</button>
    </div>

    <!-- Top ads -->
    <div class="ad-row top-ads">
      <div class="ad small-ad">
        {% raw %}
        <script>
          (function(d,z,s,c){
            s.src='//'+d+'/400/'+z; s.onerror=s.onload=E;
            function E(){c&&c(); c=null}
            try{(document.body||document.documentElement).appendChild(s)}catch(e){E()}
          })('niwooghu.com',9760476,document.createElement('script'),_rpfitz)
        </script>
        {% endraw %}
      </div>

      <div class="ad small-ad">
        {% raw %}
        <script>
          (function(d,z,s,c){
            s.src='//'+d+'/400/'+z; s.onerror=s.onload=E;
            function E(){c&&c(); c=null}
            try{(document.body||document.documentElement).appendChild(s)}catch(e){E()}
          })('niwooghu.com',9754289,document.createElement('script'),_rpfitz)
        </script>
        {% endraw %}
      </div>
    </div>
  </div>
</section>

<script>
  // Countdown & enable continue button after 5 seconds
  let count = 5;
  const countdownEl = document.getElementById('countdown');
  const continueBtn = document.getElementById('continueBtn');
  const interstitialAd = document.getElementById('interstitialAd');

  interstitialAd.classList.remove('hidden');

  const timer = setInterval(() => {
    count--;
    countdownEl.textContent = count;
    if(count <= 0){
      clearInterval(timer);
      continueBtn.disabled = false;
      countdownEl.textContent = "0";
    }
  }, 1000);
</script>

{% endblock %}
